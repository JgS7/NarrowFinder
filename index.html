<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script src="./leaflet/leaflet.js"></script>
    <link rel="stylesheet" href="./leaflet/leaflet.css">
    <link rel="stylesheet" href="./styles.css">
    <link rel="stylesheet" href="./EasyButton/easy-button.css">
    <script src="./EasyButton/easy-button.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.2.3/leaflet.draw.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.2.3/leaflet.draw.css" rel="stylesheet" />
</head>

<body>
    <div id="sidebar" class="sidebar">
        <h1>Narrow Finder</h1>

        <form>
            <label for="anchoVia">Ancho de via:</label>
            <input type="text" id="anchoVia" name="anchoVia">
        </form>

        <div id="consola" class="consola">
            <p>calle 1</p>
            <p>calle 2</p>
            <p>calle 3</p>
            <p>calle 4</p>
        </div>
    </div>

    <div id="map"></div>

    <script>
        function mostrar() {
            document.getElementById("sidebar").style.width = "260px";
            document.getElementById("map").style.marginLeft = "260px";
            document.getElementById("abrir").style.display = "none";
            document.getElementById("cerrar").style.display = "inline";
        }

        function ocultar() {
            document.getElementById("sidebar").style.width = "0";
            document.getElementById("map").style.marginLeft = "0";
            document.getElementById("abrir").style.display = "inline";
            document.getElementById("cerrar").style.display = "none";
        }
    </script>

    <script>
        var map = L.map('map').setView([40.418, -3.702], 13);

        L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            className: 'map-tiles'
        }).addTo(map);
        L.control.scale().addTo(map);
        L.marker([40.418, -3.702], {
            draggable: true
        }).addTo(map);

        var ar = 1;
        L.easyButton('icon ion-home', function () {
            if (ar == 1) {
                ar = 0;
                mostrar();
            } else {
                ar = 1;
                ocultar();
            }
        }).addTo(map);
        var bounds = [
            [40.423, -3.712],
            [40.418, -3.702]
        ];

        var editableLayers = new L.FeatureGroup();
        map.addLayer(editableLayers);

        var options = {
        position: 'topleft',
        draw: {
            polygon: {
            allowIntersection: false, // Restricts shapes to simple polygons
            drawError: {
                color: '#e1e100', // Color the shape will turn when intersects
                message: '<strong>Oh snap!<strong> you can\'t draw that!' // Message that will show when intersect
            },
            shapeOptions: {
                color: '#97009c'
            }
            },
            polyline: {
                shapeOptions: {
                color: '#f357a1',
                weight: 10
                }
            },
            // disable toolbar item by setting it to false
            polyline: false,
            circle: true, // Turns off this drawing tool
            polygon: true,
            marker: false,
            rectangle: true,
        },
        edit: {
            featureGroup: editableLayers, //REQUIRED!!
            remove: true
        }
        };

        // Initialise the draw control and pass it the FeatureGroup of editable layers
        var drawControl = new L.Control.Draw(options);
        map.addControl(drawControl);

        var editableLayers = new L.FeatureGroup();
        map.addLayer(editableLayers);

        map.on('draw:created', function(e) {
        var type = e.layerType,
            layer = e.layer;

        if (type === 'polyline') {
            layer.bindPopup('A polyline!');
        } else if ( type === 'polygon') {
            layer.bindPopup('A polygon!');
        } else if (type === 'marker') 
        {layer.bindPopup('marker!');}
        else if (type === 'circle') 
        {layer.bindPopup('A circle!');}
        else if (type === 'rectangle') 
        {layer.bindPopup('A rectangle!');}


        editableLayers.addLayer(layer);
        });
    </script>
</body>

</html>